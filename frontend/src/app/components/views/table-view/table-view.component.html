<div class="filter-paginator-wrapper">
	<div class="search-field">
		<mat-form-field>
			<input #search matInput (keyup)="searchBooks($event.target.value)" type="text" placeholder="Search for a book" [(ngModel)]="value">
			<button mat-button matSuffix (click)="searchBooks(search.value)">
				<mat-icon>search</mat-icon>
			</button>
		</mat-form-field>
		<mat-checkbox
			class="example-margin"
			[(ngModel)]="hideUnavailable"
			(click)="searchBooks(search.value)"
			disabled>
			Hide unavailable
		</mat-checkbox>
	</div>


	<div class="paginator">
		<mat-paginator [pageSizeOptions]="[20, 50, 100]" showFirstLastButtons></mat-paginator>
	</div>
</div>
<table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8" multiTemplateDataRows>

	<ng-container matColumnDef="title">
		<th mat-header-cell *matHeaderCellDef mat-sort-header> Title</th>
		<td mat-cell *matCellDef="let bookDetails">{{bookDetails.title}}</td>
	</ng-container>

	<ng-container matColumnDef="authors">
		<th mat-header-cell *matHeaderCellDef>Authors</th>
		<td mat-cell *matCellDef="let bookDetails">{{bookDetails.authors | arrToStr:'author'}}</td>
	</ng-container>

	<ng-container matColumnDef="categories">
		<th mat-header-cell *matHeaderCellDef>Categories</th>
		<td mat-cell *matCellDef="let bookDetails">{{bookDetails.categories | arrToStr:'category'}}</td>
	</ng-container>

	<ng-container matColumnDef="availableBooks">
		<th mat-header-cell *matHeaderCellDef>Available books</th>
		<td mat-cell *matCellDef="let bookDetails">{{bookDetails.books | bookStatuses:1}}/{{bookDetails.books | bookStatuses:'unlocked'}}</td>
	</ng-container>

	<ng-container matColumnDef="expandedDetail">
		<td mat-cell *matCellDef="let bookDetails" [attr.colspan]="displayedBookDetailColumns.length">
			<div class="example-element-detail"
				 [@detailExpand]="bookDetails == expandedElement ? 'expanded' : 'collapsed'">
				<div class="book-cover">
					<img *ngIf="bookDetails.coverPictureUrl" src="{{bookDetails.coverPictureUrl}}">
					<img *ngIf="!bookDetails.coverPictureUrl" src="../../../../assets/images/default-cover.png">
				</div>
				<div class="book-description">
					{{bookDetails.description| limitTo:400}}
					<span class="book-read-more cursor-pointer" routerLink="/book/{{bookDetails.id}}" routerLinkActive="active"> -- read more </span>
					<div class="book-actions">

						<app-book-actions [books]="bookDetails.books"></app-book-actions>

					</div>
				</div>
			</div>
		</td>
	</ng-container>

	<tr mat-header-row *matHeaderRowDef="displayedBookDetailColumns"></tr>
	<tr mat-row *matRowDef="let element; columns: displayedBookDetailColumns"
		class="example-element-row"
		[class.example-expanded-row]="expandedElement === element"
		(click)="expandedElement = expandedElement === element ? null : element"></tr>
	<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>

</table>
