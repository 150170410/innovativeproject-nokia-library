<mat-tab-group>
	<mat-tab label="Add book details">
		<mat-card class="entity-form">
			<div><h1>Add book details</h1></div>
			<div>
				<form name="bookDetailsParams" (ngSubmit)="createBookDetails(bookDetailsParams)" [formGroup]="bookDetailsParams">
					<div>
						<mat-form-field class="input-button">
							<input formControlName="isbn"
								   placeholder="ISBN number"
								   matInput required>
							<mat-error *ngIf="bookDetailsParams.controls.isbn.hasError">
								<div *ngIf="bookDetailsParams.controls.isbn.errors?.required">
									Isbn number is required
								</div>
								<div *ngIf="bookDetailsParams.controls.isbn.errors?.maxlength">
									The maximum length is 13 characters
								</div>
								<div *ngIf="bookDetailsParams.controls.isbn.errors?.minlength">
									The minimum length is 10 characters
								</div>
							</mat-error>
						</mat-form-field>
						<button mat-raised-button color="accent" type="button" (click)="getInfoFromAPI()">Get details</button>
					</div>

					<div>
						<mat-form-field class="element-in-table">
							<input formControlName="title"
								   placeholder="Book title"
								   matInput>
							<mat-error *ngIf="bookDetailsParams.controls.title.hasError">
								<div *ngIf="bookDetailsParams.controls.title.errors?.required">
									Title is required
								</div>
								<div *ngIf="bookDetailsParams.controls.title.errors?.maxlength">
									The maximum length is 100 characters
								</div>
							</mat-error>
						</mat-form-field>
					</div>

					<div>
						<mat-form-field class="element-in-table">
							<mat-select placeholder="Categories" [(ngModel)]="selectedCategories" [formControl]="categoryForm" multiple required>
								<mat-option *ngFor="let category of bookCategories" [value]="category">{{category.bookCategoryName}}</mat-option>
							</mat-select>
							<mat-error>
								At least one category ir required
							</mat-error>
						</mat-form-field>
					</div>

					<div>
						<mat-form-field class="author-chip-list">
							<mat-chip-list #chipList minlength="1">
								<mat-chip
									*ngFor="let author of myAuthors; let indx=index"
									[selectable]="selectable"
									[removable]="removable"
									(removed)="remove(author,indx)">
									{{(author.authorName + " " + author.authorSurname)}}
									<mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
								</mat-chip>
								<input
									placeholder="New author..."
									#authorInput
									[formControl]="authorCtrl"
									[matAutocomplete]="auto"
									[matChipInputFor]="chipList"
									[matChipInputSeparatorKeyCodes]="separatorKeysCodes"
									[matChipInputAddOnBlur]="addOnBlur"
									(matChipInputTokenEnd)="add($event)">
							</mat-chip-list>
							<mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
								<mat-option *ngFor="let author of filteredAuthors | async" [value]="author">
									{{(author.authorName + " " + author.authorSurname)}}
								</mat-option>
							</mat-autocomplete>
						</mat-form-field>
					</div>


					<div>
						<mat-form-field class="element-in-table">
							<input formControlName="tableOfContents"
								   placeholder="Table of contents"
								   matInput>
							<mat-error *ngIf="bookDetailsParams.controls.tableOfContents.hasError">
								<div *ngIf="bookDetailsParams.controls.tableOfContents.errors?.maxlength">
									The maximum length is 100 characters
								</div>
							</mat-error>
						</mat-form-field>
					</div>

					<div>
						<mat-form-field class="publication-date-in-table">
							<input matInput [max]="maxDate" [matDatepicker]="myDatepicker"
								   placeholder="Publication date" disabled required
								   formControlName="dateOfPublication">
							<mat-datepicker-toggle matSuffix [for]="myDatepicker"></mat-datepicker-toggle>
							<mat-datepicker startView="multi-year" #myDatepicker disabled="false"></mat-datepicker>

							<mat-error *ngIf="bookDetailsParams.controls.dateOfPublication.hasError">
								<div *ngIf="bookDetailsParams.controls.dateOfPublication.errors?.required">
									Publication date is required
								</div>
							</mat-error>

						</mat-form-field>
					</div>


					<div>
						<mat-form-field class="element-in-table">
							<input formControlName="coverPictureUrl"
								   placeholder="Cover picture URL"
								   matInput>
							<mat-error *ngIf="bookDetailsParams.controls.coverPictureUrl.hasError">
								<div *ngIf="bookDetailsParams.controls.coverPictureUrl.errors?.maxlength">
									The maximum length is 1000 characters
								</div>
							</mat-error>
						</mat-form-field>
					</div>

					<div>
						<mat-form-field class="element-in-table">
              <textarea formControlName="description"
						placeholder="Book description" matInput>
              </textarea>
							<mat-error *ngIf="bookDetailsParams.controls.coverPictureUrl.hasError">
								<div *ngIf="bookDetailsParams.controls.coverPictureUrl.errors?.maxlength">
									The maximum length is 1000 characters
								</div>
							</mat-error>
						</mat-form-field>
					</div>

					<div>
						<button mat-raised-button color="primary" [type]="submit">
							Create new book details
						</button>

						<button mat-raised-button color="accent" type="button" (click)="autoFillBookDetialsForm()">Demo</button>
					</div>
				</form>
			</div>
		</mat-card>
		<mat-divider></mat-divider>
		<table mat-table [dataSource]="booksDetails">

			<ng-container matColumnDef="id">
				<th mat-header-cell *matHeaderCellDef> Id</th>
				<td mat-cell *matCellDef="let bookDetails"> {{bookDetails.id}}</td>
			</ng-container>

			<ng-container matColumnDef="title">
				<th mat-header-cell *matHeaderCellDef> Title</th>
				<td mat-cell *matCellDef="let bookDetails"> {{bookDetails.title}}</td>
			</ng-container>

			<ng-container matColumnDef="dateOfPublication">
				<th mat-header-cell *matHeaderCellDef> Publication Date</th>
				<td mat-cell *matCellDef="let bookDetails"> {{bookDetails.dateOfPublication | date: 'yyyy'}}</td>
			</ng-container>

			<ng-container matColumnDef="isbn">
				<th mat-header-cell *matHeaderCellDef> ISBN</th>
				<td mat-cell *matCellDef="let bookDetails"> {{bookDetails.isbn}}</td>
			</ng-container>

			<tr mat-header-row *matHeaderRowDef="displayedBookDetailColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedBookDetailColumns"></tr>

		</table>
	</mat-tab>
	<mat-tab label="Add author">

		<mat-card class="entity-form">
			<div><h1>Add Author</h1>
				<div>
					<form name="authorsParams" (ngSubmit)="createAuthor(authorParams)" [formGroup]="authorParams">

						<div>
							<mat-form-field class="element-in-table">
								<input formControlName="authorName"
									   placeholder="Author name"
									   matInput required>
								<mat-error *ngIf="authorParams.controls.authorName.hasError">
									<div *ngIf="authorParams.controls.authorName.errors?.required">
										Author Name is required
									</div>
									<div *ngIf="authorParams.controls.authorName.errors?.maxlength">
										The maximum length is 300 characters
									</div>
								</mat-error>
							</mat-form-field>
						</div>

						<div>
							<mat-form-field class="element-in-table">
								<input formControlName="authorSurname"
									   placeholder="Author surname"
									   matInput required>
								<mat-error *ngIf="authorParams.controls.authorSurname.hasError">
									<div *ngIf="authorParams.controls.authorSurname.errors?.required">
										Author Surname is required
									</div>
									<div *ngIf="authorParams.controls.authorSurname.errors?.maxlength">
										The maximum length is 300 characters
									</div>
								</mat-error>
							</mat-form-field>
						</div>

						<div>
							<mat-form-field class="element-in-table">
                <textarea formControlName="authorDescription"
						  placeholder="Author description" matInput>
                </textarea>
								<mat-error *ngIf="authorParams.controls.authorDescription.hasError">
									<div *ngIf="authorParams.controls.authorDescription.errors?.maxlength">
										The maximum length is 10000 characters
									</div>
								</mat-error>
							</mat-form-field>
						</div>

						<div>
							<button mat-raised-button color="primary" [type]="submit">
								Create new author
							</button>
							<button mat-raised-button color="accent" type="button" (click)="autoFillAuthorForm()">Demo</button>
						</div>

					</form>
				</div>
			</div>
		</mat-card>
		<mat-divider></mat-divider>
		<table mat-table [dataSource]="authors">

			<ng-container matColumnDef="id">
				<th mat-header-cell *matHeaderCellDef> Id</th>
				<td mat-cell *matCellDef="let author"> {{author.id}}</td>
			</ng-container>

			<ng-container matColumnDef="authorName">
				<th mat-header-cell *matHeaderCellDef> Author Name</th>
				<td mat-cell *matCellDef="let author"> {{author.authorName}}</td>
			</ng-container>

			<ng-container matColumnDef="authorSurname">
				<th mat-header-cell *matHeaderCellDef> Author Surname</th>
				<td mat-cell *matCellDef="let author"> {{author.authorSurname}}</td>
			</ng-container>

			<tr mat-header-row *matHeaderRowDef="displayedAuthorsColumn"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedAuthorsColumn"></tr>

		</table>
	</mat-tab>

</mat-tab-group>
