language: java
jdk:
  - oraclejdk8

services:
  - docker
  - postgresql

before_install:

install: true


script:
  - ./mvn clean install -B
  if: branch = master AND tag = false
    # run tests

  if: branch = master AND tag = true
    # run tests
    - script ./mvn spring-boot:run -Dspring.profiles.active=production # build application
    # build docker image with commit tag
    # publish image to docker

  if: branch = develop
    # run tests
    - ./mvn spring-boot:run -Dspring.profiles.active=development # build application
    # build docker image with commit tag
    # publish image to docker hub repository

  if: branch
    # run tests
    # build application
    # build docker image with tag 'test' (manual action)
    # publish image to docker hub repository (manual action)